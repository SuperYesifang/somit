(()=>{"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},r(t)}function t(r,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,i(n.key),n)}}function i(t){var i=function(t,i){if("object"!=r(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==r(i)?i:String(i)}const e=function(){function i(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=r.ingoreError,e=void 0!==t&&t,n=r.lazyTime,o=void 0===n?1500:n;!function(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),this.ingoreError=null!=e&&e,this.lazyTime=null!=o?o:1500,this.mittGroup={},this.lazyGroup={}}var e,n;return e=i,n=[{key:"on",value:function(t,i){var e=this;if(i)if("string"==typeof t||"symbol"===r(t)){if(this.mittGroup[t])return this.mittGroup[t].push(i);this.mittGroup[t]=[i]}else if(Array.isArray(t))return t.reduce((function(r,t){return r.push(e.on(t,i)),r}),[])}},{key:"off",value:function(t,i){var e=this;if("string"==typeof t||"symbol"===r(t)){if(this.mittGroup[t])if(void 0!==i){var n=this.mittGroup[t].findIndex((function(r){return r===i}));if(-1!==n)return this.mittGroup[t].splice(n,1),!0}else delete this.mittGroup[t];else if(!this.ingoreError)throw new Error("event '".concat(String(t),"' it doesn't exist"))}else if(Array.isArray(t))return t.reduce((function(r,t){return r.push(e.off(t,i)),r}),[])}},{key:"emit",value:function(t){for(var i=this,e=arguments.length,n=new Array(e>1?e-1:0),o=1;o<e;o++)n[o-1]=arguments[o];if("string"==typeof t||"symbol"===r(t)){if(this.mittGroup[t])return this.mittGroup[t].map((function(r){return r.apply(void 0,n)}));if(!this.ingoreError)throw new Error("event '".concat(String(t),"' it doesn't exist"))}else if(Array.isArray(t))return t.reduce((function(r,t){return r.push(i.emit.apply(i,[t].concat(n))),r}),[])}},{key:"lazyEmit",value:function(r){for(var t=this,i=arguments.length,e=new Array(i>1?i-1:0),n=1;n<i;n++)e[n-1]=arguments[n];return new Promise((function(i){var n;if(t.lazyGroup[r]&&(clearTimeout(t.lazyGroup[r].timer),t.lazyGroup[r]=null),t.mittGroup[r])t.lazyGroup[r]={fn:(n=t.emit).bind.apply(n,[t,r].concat(e))},t.lazyGroup[r].timer=setTimeout((function(){return i(t.lazyGroup[r].fn())}),t.lazyTime);else if(!t.ingoreError)throw new Error("event '".concat(String(r),"' it doesn't exist"))}))}}],n&&t(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();window.Somit=e})();